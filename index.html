<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráfico de Apple</title>
    <script src="https://cdn.plotly.com/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Gráfico de la Cotización de Apple</h1>
    <div id="plot" style="height: 400px;"></div>

    <script>
        async function getAppleData() {
            try {
                const response = await fetch('https://query1.finance.yahoo.com/v7/finance/chart/AAPL?range=1mo&interval=1d');
                const data = await response.json();

                // Procesar datos
                const timestamps = data.chart.result[0].timestamp;
                const prices = data.chart.result[0].indicators.quote[0].close;

                const dates = timestamps.map(ts => new Date(ts * 1000).toLocaleDateString());

                // Verificar si los datos están correctos
                console.log('Timestamps:', timestamps);
                console.log('Prices:', prices);

                // Crear el gráfico
                const trace = {
                    x: dates,
                    y: prices,
                    mode: 'lines',
                    name: 'Precio de Cierre',
                };

                const layout = {
                    title: 'Gráfico de AAPL - Último Mes',
                    xaxis: { title: 'Fecha' },
                    yaxis: { title: 'Precio de Cierre (USD)' },
                };

                Plotly.newPlot('plot', [trace], layout);
            } catch (error) {
                console.error('Error al obtener los datos:', error);
            }
        }

        // Llamar a la función para generar el gráfico
        getAppleData();
    </script>
</body>
</html>
